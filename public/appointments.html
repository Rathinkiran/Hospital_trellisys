<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="js/appointments.js"></script>
  <title>Appointments</title>
  <style>
    body { font-family: Arial, sans-serif; margin:20px; background:#f8f9fa; }
    h2 { margin-bottom: 15px; }
    .top-bar { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; flex-wrap:wrap; }
    .filters { display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
    .filters input, .filters select { padding:6px; border:1px solid #ccc; border-radius:4px; }
    button { padding:8px 14px; border:none; border-radius:4px; cursor:pointer; font-size:14px; }
    .btn-export { background:#28a745; color:white; }
    .btn-book { background:#007bff; color:white; }
    table { width:100%; border-collapse:collapse; background:white; }
    th, td { padding:10px; border:1px solid #ddd; text-align:left; }
    th { background:#f1f1f1; }
    .actions button { margin-right:5px; }
    .btn-complete { background:#28a745; color:white; }
    .btn-reschedule { background:#ffc107; color:black; }
    .btn-cancel { background:#dc3545; color:white; }
    .btn-history { background:#6f42c1; color:white; }
    .btn-confirm { background:#007bff; color:white; }
    .status { padding:4px 8px; border-radius:12px; font-size:12px; font-weight:bold; display:inline-block; }
    .status.booked { background:#cce5ff; color:#004085; }
    .status.rescheduled { background:#fff3cd; color:#856404; }
    .status.completed { background:#d4edda; color:#155724; }
    .status.cancelled { background:#f8d7da; color:#721c24; }
    .status.pending { background:#ffeeba; color:#856404; }
    .inactive-status { 
      padding:4px 8px; 
      border-radius:4px; 
      font-weight:bold; 
      background-color:#6c757d; 
      color:white;
    }
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100vh;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 6px;
      width: 400px;
      max-width: 90%;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      position: relative;
    }
    .modal-content h3 { margin-top:0; }
    .modal-content label { display:block; margin:10px 0 5px; }
    .modal-content input, .modal-content select, .modal-content textarea { width:100%; padding:6px; border:1px solid #ccc; border-radius:4px; }
    .modal-content button { margin-top:15px; }
    .close-btn { background:red; color:white; float:right; padding:4px 8px; cursor:pointer; }
    .back-btn { margin-bottom:20px; background:#6c757d; color:white; }
  </style>
</head>
<body>
  <button class="back-btn" id="backBtn">‚Üê Back</button>
  <h2>Appointments</h2>

  <div class="top-bar">
    <div>
      <input type="text" id="searchBox" placeholder="Search by doctor or patient name">
      <div class="filters">
        <input type="text" id="filterAppointmentId" placeholder="Appointment ID">
        <input type="date" id="filterDate">
        <select id="filterStatus">
          <option value="">All Status</option>
          <option value="booked">Booked</option>
          <option value="pending">Pending</option>
          <option value="rescheduled">Rescheduled</option>
          <option value="completed">Completed</option>
          <option value="cancelled">Cancelled</option>
        </select>
        <select id="filterRange">
          <option value="">All Time</option>
          <option value="today">Today</option>
          <option value="this_week">This Week</option>
          <option value="last_month">Last Month</option>
        </select>
        <select id="filterHospital" style="display:none;">
          <option value="">All Hospitals</option>
        </select>
      </div>
    </div>
    <div>
      <button class="btn-export" id="exportCSV">Export CSV</button>
      <button class="btn-book" id="bookAppointmentBtn">Book Appointment</button>
    </div>
  </div>

  <table id="appointmentsTable">
    <thead>
      <tr id="appointmentsHeader"></tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- Reschedule Modal -->
  <div class="modal" id="rescheduleModal">
    <div class="modal-content">
      <span class="close-btn" onclick="$('#rescheduleModal').hide()">&times;</span>
      <h3>Reschedule Appointment</h3>
      <form id="rescheduleForm">
        <input type="hidden" id="rescheduleAppointmentId">
        <label>New Date</label>
        <input type="date" id="rescheduleDate" required>
        <label>New Time</label>
        <input type="time" id="rescheduleTime" required>
        <label>Reason</label>
        <textarea id="rescheduleReason" required></textarea>
        <button type="submit" class="btn-reschedule">Reschedule</button>
      </form>
    </div>
  </div>

  <!-- Confirm / Cancel Modal -->
  <div class="modal" id="actionModal">
    <div class="modal-content">
      <span class="close-btn" onclick="$('#actionModal').hide()">&times;</span>
      <h3 id="actionModalTitle"></h3>
      <p><strong>Appointment ID:</strong> <span id="modalAppointmentId"></span></p>
      <p><strong>Date:</strong> <span id="modalAppointmentDate"></span></p>
      <p><strong>Start Time:</strong> <span id="modalAppointmentStart"></span></p>
      <p><strong>End Time:</strong> <span id="modalAppointmentEnd"></span></p>
      <button id="confirmActionBtn" class="btn-confirm"></button>
    </div>
  </div>
</body>
</html>
