<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Add Patient - ABC Hospital</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<style>
:root {
  --primary: #2a6bc9;
  --primary-dark: #1a56b4;
  --primary-light: #e8f2ff;
  --text: #2d3748;
  --white: #ffffff;
}
body { font-family: 'Poppins', sans-serif; background: var(--primary-light); color: var(--text); padding:20px;}
.container { max-width:500px; margin:auto; background:white; padding:25px; border-radius:10px; box-shadow:0 8px 20px rgba(0,0,0,0.1);}
h2 { color: var(--primary); margin-bottom:20px; text-align:center;}
label { display:block; margin-top:10px;}
input, select { width:100%; padding:8px; margin-top:5px; border-radius:5px; border:1px solid #ccc;}
button { margin-top:15px; padding:10px 15px; border:none; border-radius:5px; cursor:pointer; font-weight:500; transition:0.2s;}
button#submitBtn { background: var(--primary); color:white;}
button#submitBtn:hover { background: var(--primary-dark);}
button#backBtn { background:#e53e3e; color:white; margin-right:10px;}
button#backBtn:hover { background:#c53030;}
</style>
</head>
<body>

<div class="container">
    <h2>Add Patient</h2>
    <form id="addPatientForm">
        <label for="name">Name</label>
        <input type="text" id="name" required>

        <label for="email">Email</label>
        <input type="email" id="email" required>

        <label for="password">Password</label>
        <input type="password" id="password" required>

        <label for="gender">Gender</label>
        <select id="gender" required>
            <option value="">Select Gender</option>
            <option value="male">Male</option>
            <option value="female">Female</option>
        </select>

        <label for="problem">Problem</label>
        <input type="text" id="problem" required>

        <div style="display:flex; justify-content:flex-start; gap:10px;">
            <button type="button" id="backBtn">Back</button>
            <button type="submit" id="submitBtn">Add Patient</button>
        </div>
    </form>
</div>

<script>
$(document).ready(function() {
    const token = localStorage.getItem("token");
    if(!token){
        window.location.href = "index.html";
    }

    // Back button
    $("#backBtn").click(function(){
        window.location.href = "http://localhost:8080/dashboard.html";
    });

    // Submit form
    $("#addPatientForm").submit(function(e){
        e.preventDefault();

        const data = {
            name: $("#name").val(),
            email: $("#email").val(),
            password: $("#password").val(),
            gender: $("#gender").val(),
            problem: $("#problem").val()
        };

        $.ajax({
            url: "http://localhost:8080/api/add-Patients",
            method: "POST",
            headers: { Authorization: `Bearer ${token}` },
            data: data,
            success: function(res){
                if(res.status){
                    alert(res.mssge || "Patient added successfully");
                    window.location.href = "patient.html"; // Redirect to listing page
                } else {
                    alert(res.mssge || "Failed to add patient");
                }
            },
            error: function(){
                alert("Error adding patient");
            }
        });
    });
});
</script>

</body>
</html>
